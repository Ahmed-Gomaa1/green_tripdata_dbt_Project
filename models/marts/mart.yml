version: 2

models:
  - name: fct_green_trips
    description: "Fact table containing enriched green taxi trips with timestamps, locations, financials, and calculated metrics."
    columns:
      - name: trip_key
        description: "Surrogate key for each trip."
        tests:
          - not_null
      - name: pickup_datetime
        description: "Trip pickup timestamp."
      - name: dropoff_datetime
        description: "Trip dropoff timestamp."
      - name: pickup_date
        description: "Date portion of pickup_datetime."
      - name: pickup_day_of_week
        description: "Day of week for pickup (0=Monday, 6=Sunday)."
      - name: pickup_day_name
        description: "Day name for pickup (e.g., Monday)."
      - name: vendor_id
        description: "Vendor ID for the trip."
      - name: vendor_name
        description: "Readable vendor name derived from vendor_id."
      - name: pickup_location_id
        description: "Pickup location ID."
      - name: pickup_borough
        description: "Borough of pickup location."
      - name: pickup_zone_name
        description: "Zone name of pickup location."
      - name: pickup_service_zone
        description: "Service zone of pickup location."
      - name: dropoff_location_id
        description: "Dropoff location ID."
      - name: dropoff_borough
        description: "Borough of dropoff location."
      - name: dropoff_zone_name
        description: "Zone name of dropoff location."
      - name: dropoff_service_zone
        description: "Service zone of dropoff location."
      - name: passenger_count
        description: "Number of passengers."
      - name: trip_distance
        description: "Distance of the trip in miles."
      - name: trip_duration_minutes
        description: "Trip duration in minutes."
      - name: distance_category
        description: "Distance bucket classification."
      - name: time_of_day_category
        description: "Time-of-day bucket classification."
      - name: day_type
        description: "Day type (Weekend or Weekday)."
      - name: fare_amount
        description: "Fare amount."
      - name: extra
        description: "Extra charges."
      - name: mta_tax
        description: "MTA tax applied to the trip."
      - name: tip_amount
        description: "Tip amount."
      - name: tolls_amount
        description: "Tolls for the trip."
      - name: improvement_surcharge
        description: "Improvement surcharge applied."
      - name: congestion_surcharge
        description: "Congestion surcharge applied."
      - name: total_amount
        description: "Total trip amount."
      - name: tip_percentage
        description: "Tip as a percentage of fare."
      - name: base_charges
        description: "Fare and surcharges excluding tips and tolls."
      - name: payment_type_id
        description: "Payment type ID."
      - name: rate_code_id
        description: "Rate code ID."
      - name: trip_type_id
        description: "Trip type ID."
      - name: store_and_fwd_flag
        description: "Flag indicating if trip data was stored and forwarded."
      - name: ehail_fee
        description: "E-hail fee applied."

  - name: borough_summary
    description: "Aggregated metrics at the borough level including trip counts, revenue, distance, efficiency, and rankings."
    columns:
      - name: pickup_borough
        description: "Borough of pickup location."
      - name: total_trips
        description: "Total number of trips originating from the borough."
      - name: unique_zones
        description: "Number of unique pickup zones in the borough."
      - name: total_revenue
        description: "Total revenue generated by trips from this borough."
      - name: avg_revenue_per_trip
        description: "Average revenue per trip."
      - name: total_fare
        description: "Total fare amount."
      - name: total_tips
        description: "Total tip amount."
      - name: total_miles
        description: "Sum of trip distances from this borough."
      - name: avg_miles_per_trip
        description: "Average trip distance."
      - name: avg_tip_percentage
        description: "Average tip percentage across trips."
      - name: avg_duration_minutes
        description: "Average trip duration in minutes."
      - name: avg_passengers
        description: "Average number of passengers per trip."
      - name: revenue_rank
        description: "Rank of the borough based on total revenue."
      - name: trip_count_rank
        description: "Rank of the borough based on total trip count."
      - name: pct_of_total_revenue
        description: "Percentage contribution of the borough to total revenue."
